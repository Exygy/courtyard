{% set classes = [
  'jcc-modal',
  modal.background_variant ? 'jcc-modal--' ~ modal.background_variant,
  modal.size_variant ? 'jcc-modal--' ~ modal.size_variant,
]|merge(modal.classes|default([''])) %}

{% set randomId = modal.id ?: random() %}
{% set modalTarget = modal.target ?: randomId %}

<button class="jcc-modal__trigger {{ modal.parent_component_class }}" data-a11y-dialog-show="{{ modalTarget }}">
  {% if modal.image_src %}
    <img src="{{ item.image_src }}" alt="{{ modal.aria-label }}">
  {% else %}
    {{ modal.button_label ?: 'Read more'|t }}
  {% endif %}
</button>

<div id="{{ randomId }}" class="{{ classes|join(' ')|trim }}" id="{{ randomId }}" aria-hidden="true">
  <div class="jcc-modal__backdrop" tabindex="-1" data-a11y-dialog-hide=""></div>
  {# @todo: aria-labelledby usage is incorrect, headergroup data is not
  available, and this will fail WCAG because of id="jcc-dialog-window". Not sure
  if we need this id here, will need to follow up. #}
  <dialog class="jcc-modal__dialog js-dialog-window" id="jcc-dialog-window" aria-labelledby="{{ headergroup.title }}" title="{{ headergroup.title }}">
    <button class="jcc-modal__close-button usa-button--unstyled jcc-modal__close-reset" type="button" data-a11y-dialog-hide="{{ randomId }}" aria-label="{{ 'Close this dialog window'|t }}">
      {% include '@atoms/icons/icon.twig' with {
        icon: {
          name: "close",
          title: "Close"|t,
          decorative: false,
        }
      } %}
    </button>

    <div class="jcc-modal__content">
      {{ modal.content }}
    </div>

    {% if modal.footer_button %}
      <footer class="jcc-modal__footer">
        <button class="usa-button jcc-modal__close-reset" type="button" data-a11y-dialog-hide="{{ randomId }}" aria-label="{{ 'Close this dialog window'|t }}">
          {{ 'Done'|t }}
        </button>
      </footer>
    {% endif %}
  </dialog>
</div>
